{"version":3,"sources":["webpack:///./src/app/account/map/map.module.ts","webpack:///./src/app/account/map/map.page.html","webpack:///./src/app/account/map/map.page.scss","webpack:///./src/app/account/map/map.page.ts"],"names":[],"mappings":"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","file":"account-map-map-module.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { MapPage } from './map.page';\nimport { TranslateModule } from '@ngx-translate/core';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: MapPage\n  }\n];\n\n@NgModule({\n  imports: [\n    CommonModule,\n    TranslateModule,\n    FormsModule,\n    IonicModule,\n    RouterModule.forChild(routes)\n  ],\n  declarations: [MapPage]\n})\nexport class MapPageModule {}\n","module.exports = \"<ion-header mode='ios'>\\n  <ion-toolbar color=\\\"{{settings.theme.header}}\\\">\\n  \\t<ion-buttons slot=\\\"start\\\">\\n      <ion-back-button defaultHref=\\\"/tabs/account\\\"></ion-back-button>\\n    </ion-buttons>\\n    <ion-title>{{\\\"Locations\\\" | translate}}</ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content>\\n  <div #mapCanvas class=\\\"map-canvas\\\"></div>\\n</ion-content>\\n\"","module.exports = \".map-canvas {\\n  position: absolute;\\n  height: 100%;\\n  width: 100%;\\n  background-color: transparent;\\n  opacity: 0;\\n  transition: opacity 150ms ease-in; }\\n\\n.show-map {\\n  opacity: 1; }\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvYWNjb3VudC9tYXAvQzpcXGRhdGFcXHdvcmtcXENsaWVudHNcXGdoYXNzYW5cXGlvbmljNENvbW1lcmNlQVBQXFxhcHAvc3JjXFxhcHBcXGFjY291bnRcXG1hcFxcbWFwLnBhZ2Uuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNFLGtCQUFrQjtFQUVsQixZQUFZO0VBQ1osV0FBVztFQUVYLDZCQUE2QjtFQUU3QixVQUFVO0VBQ1YsaUNBQWlDLEVBQUE7O0FBR25DO0VBQ0UsVUFBVSxFQUFBIiwiZmlsZSI6InNyYy9hcHAvYWNjb3VudC9tYXAvbWFwLnBhZ2Uuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbIi5tYXAtY2FudmFzIHtcbiAgcG9zaXRpb246IGFic29sdXRlO1xuXG4gIGhlaWdodDogMTAwJTtcbiAgd2lkdGg6IDEwMCU7XG5cbiAgYmFja2dyb3VuZC1jb2xvcjogdHJhbnNwYXJlbnQ7XG5cbiAgb3BhY2l0eTogMDtcbiAgdHJhbnNpdGlvbjogb3BhY2l0eSAxNTBtcyBlYXNlLWluO1xufVxuXG4uc2hvdy1tYXAge1xuICBvcGFjaXR5OiAxO1xufVxuIl19 */\"","import { Component, ElementRef, ViewChild, AfterViewInit } from '@angular/core';\nimport { Platform } from '@ionic/angular';\nimport { Settings } from './../../data/settings';\nimport { ApiService } from '../../api.service';\n\n@Component({\n    selector: 'page-map',\n    templateUrl: 'map.page.html',\n    styleUrls: ['./map.page.scss']\n})\nexport class MapPage implements AfterViewInit {\n    @ViewChild('mapCanvas') mapElement: ElementRef;\n    mapData: any = [];\n    constructor(public api: ApiService, public platform: Platform, public settings: Settings) {}\n    async ngAfterViewInit() {\n        await this.api.postItem('locations').subscribe(res => {\n            this.processData(res);\n            console.log(res);\n        }, err => {\n            console.log(err);\n        });\n    }\n    async processData(data) {\n        const googleMaps = await getGoogleMaps(data.mapApiKey);\n        data.locations.map((item, index) => {\n            this.mapData[index] = {};\n            this.mapData[index].name = item.title;\n            this.mapData[index].lat = parseFloat(item.description);\n            this.mapData[index].lng = parseFloat(item.url);\n            if (index == 0) this.mapData[index].center = true;\n            console.log(this.mapData);\n        });\n        const mapEle = this.mapElement.nativeElement;\n        const map = new googleMaps.Map(mapEle, {\n            center: this.mapData.find((d: any) => d.center),\n            zoom: data.mapZoom\n        });\n        this.mapData.forEach((markerData: any) => {\n            const infoWindow = new googleMaps.InfoWindow({\n                content: `<h5>${markerData.name}</h5>`\n            });\n            const marker = new googleMaps.Marker({\n                position: markerData,\n                map,\n                title: markerData.name\n            });\n            marker.addListener('click', () => {\n                infoWindow.open(map, marker);\n            });\n        });\n        googleMaps.event.addListenerOnce(map, 'idle', () => {\n            mapEle.classList.add('show-map');\n        });\n    }\n}\n\nfunction getGoogleMaps(apiKey: string): Promise < any > {\n    const win = window as any;\n    const googleModule = win.google;\n    if (googleModule && googleModule.maps) {\n        return Promise.resolve(googleModule.maps);\n    }\n    return new Promise((resolve, reject) => {\n        const script = document.createElement('script');\n        script.src = `https://maps.googleapis.com/maps/api/js?key=${apiKey}&v=3.31`;\n        script.async = true;\n        script.defer = true;\n        document.body.appendChild(script);\n        script.onload = () => {\n            const googleModule2 = win.google;\n            if (googleModule2 && googleModule2.maps) {\n                resolve(googleModule2.maps);\n            } else {\n                reject('google maps not available');\n            }\n        };\n    });\n}"],"sourceRoot":""}