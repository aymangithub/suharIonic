{"version":3,"sources":["webpack:///./src/app/account/order/order.module.ts","webpack:///./src/app/account/order/order.page.html","webpack:///./src/app/account/order/order.page.scss","webpack:///./src/app/account/order/order.page.ts"],"names":[],"mappings":"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","file":"account-order-order-module.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { OrderPage } from './order.page';\n\nimport { KeysPipeModule } from '../../pipes/pipe.module';\nimport { TranslateModule } from '@ngx-translate/core';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: OrderPage\n  }\n];\n\n@NgModule({\n  imports: [\n    CommonModule,\n    TranslateModule,\n    FormsModule,\n    IonicModule,\n    KeysPipeModule,\n    RouterModule.forChild(routes)\n  ],\n  declarations: [OrderPage]\n})\nexport class OrderPageModule {}\n","module.exports = \"<ion-header mode='ios'>\\n  <ion-toolbar color=\\\"{{settings.theme.header}}\\\">\\n  \\t<ion-buttons slot=\\\"start\\\">\\n      <ion-back-button defaultHref=\\\"/tabs/account/orders\\\"></ion-back-button>\\n    </ion-buttons>\\n    <ion-title>{{\\\"Order\\\" | translate}}</ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n<ion-content padding class=\\\"order\\\">\\n<ion-list *ngIf=\\\"order\\\">\\n  <ion-list-header>\\n    <ion-label style=\\\"font-weight: 900;\\\">{{order.id}} - <span style=\\\"text-transform: uppercase;\\\">{{order.status}}</span></ion-label>\\n  </ion-list-header>\\n  <ion-list-header>\\n    <ion-label>{{\\\"Date\\\" | translate}}</ion-label>\\n  </ion-list-header>\\n  <ion-item>\\n    <ion-label text-wrap>\\n      <p>{{order.date_created | date:'MMM d, y hh:mm a'}}</p>\\n    </ion-label>\\n  </ion-item>\\n  <ion-list-header>\\n    <ion-label>{{\\\"Billing Address\\\" | translate}}</ion-label>\\n  </ion-list-header>\\n  <ion-item>\\n    <ion-label text-wrap>\\n      <p>\\n    <span>{{order.billing.first_name}}</span>&nbsp;<span>{{order.billing.last_name}}</span>&nbsp;<span>{{order.billing.company}}</span>&nbsp;<span>{{order.billing.address_1}}</span>&nbsp;<span>{{order.billing.address_2}}</span>&nbsp;<span>{{order.billing.city}}</span>\\n    <span>{{order.billing.state}}</span>&nbsp;<span>{{order.billing.postcode}}</span>&nbsp;<span>{{order.billing.country}}</span>\\n    &nbsp;<span>{{order.billing.email}}</span>&nbsp;<span>{{order.billing.phone}}</span>\\n  </p>\\n    </ion-label>\\n  </ion-item>\\n  <ion-list-header>\\n    <ion-label>{{\\\"Shipping Address\\\" | translate}}</ion-label>\\n  </ion-list-header>\\n  <ion-item>\\n    <ion-label text-wrap>\\n      <p>\\n    <span>{{order.shipping.first_name}}</span>&nbsp;<span>{{order.shipping.last_name}}</span>&nbsp;<span>{{order.shipping.company}}</span>&nbsp;<span>{{order.shipping.address_1}}</span>&nbsp;<span>{{order.shipping.address_2}}</span>&nbsp;<span>{{order.shipping.city}}</span>&nbsp;\\n    <span>{{order.shipping.state}}</span>&nbsp;<span>{{order.shipping.postcode}}</span>&nbsp;<span>{{order.shipping.country}}</span>&nbsp;\\n    <span>{{order.shipping.email}}</span>&nbsp;<span>{{order.shipping.phone}}</span>\\n  </p>\\n    </ion-label>\\n  </ion-item>\\n  <ion-list-header>\\n    <ion-label>{{\\\"Shipping Method\\\" | translate}}</ion-label>\\n  </ion-list-header>\\n  <ion-item>\\n    <ion-label text-wrap *ngFor=\\\"let item of order.shipping_lines | keys\\\">\\n    <p>{{item.value.method_title}}</p>\\n    </ion-label>\\n  </ion-item>\\n  <ion-list-header>\\n    <ion-label>{{\\\"Payment Method\\\" | translate}}</ion-label>\\n  </ion-list-header>\\n  <ion-item>\\n    <ion-label text-wrap>\\n    <p [innerHTML]=\\\"order.payment_method_title\\\"></p>\\n    </ion-label>\\n      <ion-button color=\\\"{{settings.theme.button}}\\\" slot=\\\"end\\\" fill=\\\"clear\\\" *ngIf=\\\"(order.status != 'refunded' || order.status != 'cancelled' || order.status != 'failed') && settings.settings?.enable_refund\\\" (click)=\\\"showField()\\\" [disabled]=\\\"disableRefundButton\\\">\\n        {{\\\"Refund\\\" | translate}}\\n      </ion-button>\\n      <ion-button color=\\\"{{settings.theme.button}}\\\" slot=\\\"end\\\" fill=\\\"clear\\\" *ngIf=\\\"order.status == 'refunded' && settings.settings?.enable_refund\\\" disabled>\\n        {{\\\"Refunded\\\" | translate}}\\n      </ion-button>\\n  </ion-item>\\n  <div *ngIf=\\\"showRefund\\\">\\n    <ion-item lines=\\\"none\\\">\\n        <ion-input required type=\\\"text\\\" [(ngModel)]=\\\"refund.ywcars_form_reason\\\" name=\\\"amount\\\" placeholder=\\\"Reason for refund\\\"></ion-input>\\n    </ion-item>\\n\\n    <ion-button expand=\\\"block\\\" color=\\\"{{settings.theme.button}}\\\" (click)=\\\"requestRefund()\\\">Request refund</ion-button>\\n</div>\\n\\n  <ion-list-header>\\n    <ion-label>{{\\\"Items\\\" | translate}}</ion-label>\\n  </ion-list-header>\\n  <ion-item>\\n    <ion-label text-wrap>\\n    <p *ngFor=\\\"let item of order.line_items\\\">{{item.name}} <span *ngFor=\\\"let meta of item.meta_data\\\">{{meta.value}} </span> x {{item.quantity}} <span style=\\\"float: right\\\">{{item.total | currency:settings.currency:symbol:'1.2-2'}}</span></p>\\n    </ion-label>\\n  </ion-item>\\n  <ion-list-header>\\n    <ion-label>{{\\\"Totals\\\" | translate}}</ion-label>\\n  </ion-list-header>\\n  <ion-item>\\n    <ion-label text-wrap>\\n    <p>{{\\\"Shipping\\\" | translate}}<span style=\\\"float: right\\\">{{order.shipping_total | currency:settings.currency:symbol:'1.2-2'}}</span></p>\\n    <p>{{\\\"Discount\\\" | translate}}<span style=\\\"float: right\\\">{{order.discount_total | currency:settings.currency:symbol:'1.2-2'}}</span></p>\\n    <p>{{\\\"Tax\\\" | translate}}<span style=\\\"float: right\\\">{{order.total_tax | currency:settings.currency:symbol:'1.2-2'}}</span></p>\\n    <ion-label class=\\\"grand-total\\\">Total<span style=\\\"float: right\\\">{{order.total | currency:settings.currency:symbol:'1.2-2'}}</span></ion-label>\\n  </ion-label>\\n  </ion-item>\\n</ion-list>\\n</ion-content>\\n\"","module.exports = \".order .grand-total {\\n  font-weight: 900; }\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvYWNjb3VudC9vcmRlci9DOlxcZGF0YVxcd29ya1xcQ2xpZW50c1xcZ2hhc3NhblxcaW9uaWM0Q29tbWVyY2VBUFBcXGFwcC9zcmNcXGFwcFxcYWNjb3VudFxcb3JkZXJcXG9yZGVyLnBhZ2Uuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUVRLGdCQUFnQixFQUFBIiwiZmlsZSI6InNyYy9hcHAvYWNjb3VudC9vcmRlci9vcmRlci5wYWdlLnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyIub3JkZXIge1xuICAgIC5ncmFuZC10b3RhbCB7XG4gICAgICAgIGZvbnQtd2VpZ2h0OiA5MDA7XG4gICAgfVxufSJdfQ== */\"","import { Component, OnInit } from '@angular/core';\nimport { LoadingController, NavController } from '@ionic/angular';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { ApiService } from '../../api.service';\nimport { Settings } from './../../data/settings';\nimport { ToastController } from '@ionic/angular';\nimport { TranslateService } from '@ngx-translate/core';\n\n@Component({\n    selector: 'app-order',\n    templateUrl: './order.page.html',\n    styleUrls: ['./order.page.scss'],\n})\nexport class OrderPage implements OnInit {\n    id: any;\n    order: any;\n    refundKeys: any = {};\n    refund: any = {};\n    showRefund: boolean = false;\n    disableRefundButton: boolean = false;\n    refundResponse: any = {};\n    lan: any = {};\n    constructor(public translate: TranslateService, public api: ApiService, public settings: Settings, public toastController: ToastController, public router: Router, public loadingController: LoadingController, public navCtrl: NavController, public route: ActivatedRoute) {}\n    async getOrder() {\n        const loading = await this.loadingController.create({\n            message: 'Loading...',\n            translucent: true,\n            cssClass: 'custom-class custom-loading'\n        });\n        await loading.present();\n        await this.api.getItem('orders/' + this.id).subscribe(res => {\n            this.order = res;\n            for(let item in this.order.meta_data){\n                if(this.order.meta_data[item].key == '_ywcars_requests')\n                this.disableRefundButton = true;\n            }\n            loading.dismiss();\n        }, err => {\n            console.log(err);\n            loading.dismiss();\n        });\n    }\n    async refundKey() {\n        await this.api.postItem('woo_refund_key').subscribe(res => {\n            this.refundKeys = res;\n            console.log(this.refundKeys);\n        }, err => {\n            console.log(err);\n        });\n    }\n    ngOnInit() {\n        this.translate.get(['Refund request submitted!', 'Unable to submit the refund request']).subscribe(translations => {\n            this.lan.refund = translations['Refund request submitted!'];\n            this.lan.unable = translations['Unable to submit the refund request'];\n        });\n        this.id = this.route.snapshot.paramMap.get('id');\n        this.getOrder();\n        this.refundKey();\n    }\n\n    showField() {\n      this.showRefund = !this.showRefund;\n  }\n\n    async requestRefund(){\n        this.disableRefundButton = true;\n        this.refund.ywcars_form_order_id = this.id;\n        this.refund.ywcars_form_whole_order = '1';\n        this.refund.ywcars_form_product_id = '';\n\n        this.refund.ywcars_form_line_total = this.order.total;\n        this.refund.ywcars_form_reason = this.refund.ywcars_form_reason;\n        this.refund.action = 'ywcars_submit_request';\n        this.refund.security = this.refundKeys.ywcars_submit_request;\n\n        await this.api.postItem('woo_refund_key', this.refund).subscribe(res => {\n            this.refundResponse = res;\n            console.log(this.refundResponse);\n            this.getOrder();\n            this.disableRefundButton = false;\n            if(this.refundResponse.success)\n            this.presentToast(this.lan.refund);\n            else\n            this.presentToast(this.lan.unable);\n        }, err => {\n            console.log(err);\n            this.disableRefundButton = false;\n        });\n    }\n    async presentToast(message) {\n        const toast = await this.toastController.create({\n          message: message,\n          duration: 2000\n        });\n        toast.present();\n    }\n}"],"sourceRoot":""}